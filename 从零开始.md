### 反思
 最近一段时间都很浮躁，学习得过且过，走马观花，经常犯很多错误。研究生正是学习的重要时刻，老师带着的时候还不努力学习真的是蠢透了。好在能发现错误，及时纠正便是进步，从头开始。踏踏实实的，去静下心来学习吧吾日三省吾身，不能偷懒，不能混日子，不能像本科时候那样天天不思进取。

##### 以下内容完全是根据我的大神，崇拜的导师小康老师的课件学习记录的。大约是我对老师讲的内容的一次理解和精简。毕竟老师是个格式控完美党，他看见我写的会疯掉。但是读完我这个傻白甜版本再去看老师的版本就会发现！老师的版本是真的全面易懂。额，所以我这是在光明正大的做笔记顺便分享呢。人都是在一个个flag中成长的。分享出来才有进步的动力。嘻嘻嘻。
 
## 前期准备
### R软件：目前已经发布到3.4.2版本。
#### R包安装与加载：
三种安装方式：
#### 1.在线安装：
命令为 `install.packages(" ")` `" "` 中填写安装包名称。例如：
```r
install.packages("dplyr")
```
若想一次性安装多个包，则如下
```r
install.packages(c("package A","package B"))
```
即：使用`c()`将不同包进行联结，中间加逗号。字母`c`正是联结的意思。

强势安利：请将以下命令拷贝粘贴到R软件中运行，居家旅行，统计分析必备良包。网速好的话没几分钟就安装完了。
```r
install.packages(c("ggplot2","dplyr","tidyr","stringr","lubridate","reader","readx1","haven","httr","rvest","xml2","devtools","tidyverse"))
```
备注：

确保联网。

此命令中不能省略引号。

首次安装R包时会出现镜像选择，请选择国内镜像，如清华大学、广州大学等。

在R中所有的符号都需使用英文符号
### 2.离线安装：
不太常用。就不详细写了，有兴趣移步小康老师主页~~
### 3.GitHub 安装：
一些新的包，可能CRAN上没有，可以去github中安装。建议使用Hadley开发的 **devtools**包安装完成。以下是基本步骤。

1.安装**devtools**包（复习使用第一种安装方法）
2.加载该包，即输入`library(devtools)`。
3.使用其中的`install_github()`函数完成安装。

例如：
```r
install.packages("devtools")
library(devtools)
install_github("hadlly/dplyr)
```
为了更好使用github和R的相关功能建议windows用户安装 [`Rtools`](https://cran.r-project.org/bin/windows/Rtools/)
这是用于在 Windows 平台下开发 R 包和 R 本身的软件插件。
R 与和后面即将介绍 RStudio 都可以安装 R 包，一般建议用 R 自身安装 R 包。
### R 包加载与使用
R中内置的少数函数以及**base**包中的函数可以直接调用，无需加载。但是多数函数都在其他包中，若要使用进行数据分析，首先需要加载这些包，有两种方式。

1.使用加载命令`library()`，此时的包不需要加引号。
```r
library(dplyr)
```
加载该包之后，就可以使用其中的`filter()、lag()`等函数。原基础安装包中的同名函数将被覆盖。

2.用双冒号`::`的形式调用某一函数，用法为`package_name::function_name`，即先写包名，双冒号后写入函数名称。
```{r}
dplyr::sample_n(mtcars,2)
```
即，使用**dplyr**包中的`sample_n`函数，从`mtcars`数据中任取两行。
#### 工作目录设置
R 默认读入和写出的数据对象都存储在当前工作目录（working directiory）中。若要读入其他目录中对象，则需要指定工作路径。一般而言，开始某个数据分析项目时，即可新建一个目录并将其设定为当前工作目录。此后所有的数据对象均储存其中。对中文操作系统的分析者而言，首先需要明确一条**基本命名规则**：R 中的目录名和文件名不能有中文，而只使用英文字母、数字以及 `-` 和 `_` 的组合。建议在非系统盘的根目录下建立数据分析目录。创建新目录可以直接在操作系统中进行，也可以在R中使用命令`dir.creat(" ")`建立新目录，`" "`中输入路径名和目录名。如
```r
dir.creat("d:/R2017")
```
此时就可以在D盘中找到该文件夹。

**注意**：R中的路径分隔符尾正斜杠（forward slash）`/`。
若已经创建目录，可以通过命令`setwd()`将该目录设为当前工作路径，如：
```r
setwd("D:/R2017/course01")
```
R 路径名中的撇斜杠`/`也可写成双捺斜杠`\\`的形式，如：

```r
setwd("D:\\R2017\\course01")
```
设置完毕后，可通过`getwd()`命令查看当前工作路径，此时括号中不需要填入任何内容。




### 语言选项设置

也许你已注意到前面提示中出现了“程辑包”而不是“程序包”这种古怪的翻译。这是因为 R 的相关中文提示最早并非由中国大陆人士翻译所致。实际上，按照其默认的中文提示（如错误提示）进行网络搜索，通常不能找到很好的资源。这一方面是由于翻译质量与翻译习惯问题，另一方面是由于国内的中文 R 社区在活跃度和技术水平上与国外的成熟社区还有较大距离。因此，安装完 R 后的第一项设置，可考虑修改默认语言选项，将其设为英文。

若想使修改后的语言选项仅对此次打开的 R 有效，可使用如下命令：

```r
Sys.setenv(LANG = "en")
```

`Sys.setenv()`是修改环境变量函数，`LANG`表示语言（language），`en`表示英语（English）。这样在将来出现错误提示时，可使用搜索引擎检索到相关解答资源。注意应当使用英文搜索引擎来搜索英文资源，以提高效率。

这种做法的劣势在于关闭 R 而重新打开后，其默认语言选项仍是中文。严格来说，这并不是 R 本身的设置，而是它默认采用 Windows 系统的默认语言。对于大陆人士而言，其所使用的 Windows 操作系统通常默认语言为中文，因此 R 会使用中文提示。为一劳永逸地改变此版本下的 R 的默认语言，可采用如下方式：

1. 找到安装路径下`etc`文件夹中的`Rconsole`文件。如选择默认安装方式，R 通常安装在 C 盘的 Program Files 目录下。以本人写作此文档时的 R 版本为例，其路径为：`C:\Program Files\R\R-3.4.2\etc`。

2. 用文本编辑器打开`Rconsole`文件。建议安装[ Notepad++](https://notepad-plus-plus.org/) 软件而不是使用 Windows 自带的记事本软件打开^[Notepad++ 也是一个免费的自由开源软件。之所以推荐使用它而不是Windows自带的记事本，原因比较复杂，涉及计算机的字符编码问题，暂不必深究。仅了解一点即好：如有可能，Windows 平台下尽可能使用 Notepad++ 而不是其自带的记事本软件创建或修改文本文件。若是 Mac 系统，可使用 [Sublime](https://www.sublimetext.com/) 软件或其他开源文本编辑器打开。]。找到以下文字：

```r
## Language for messages
language = 
```

3. 通常来说，`=`号后面默认是空白，以便调用 Windows 的默认语言。在 `=`后填入指定的语言缩写，保存修改后关闭该文档，即可永久性修改默认语言设置。例如：

```r
## Language for messages
language = en
```

其中`en`就表示 English 。保存后关闭（Windows 系统可能会提醒需要管理员权限方可修改，点击确定），重新打开 R ，应当可以看到所
有提示文字已变为英文:

```r

R version 3.4.2 (2017-09-28) -- "Short Summer"
Copyright (C) 2017 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]
```

实际上，对有经验的Windows用户来说，设置 R 的默认语言为英文的最简便方式是在安装 R 时，出现`Select Components`对话框后，将里面出现的`Message Translation`选项前面默认出现的勾去掉，即可保证界面和提示语言为英文。你不妨在安装新版本的 R 时尝试这种方法。

最后提醒：使用 R ，即意味着基本告别中文操作与提示。应尽快熟练英文环境下的相关操作，这对提升 R 的使用效率至为关键。
